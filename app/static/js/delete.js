(()=>{"use strict";class e{constructor(e){let t=document.getElementById(e);this.url=t.getAttribute("url"),this.csrf_token=t.getAttribute("csrf_token")}send(e,t,s=!0){let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{JSON.parse(n.responseText)}catch(e){return void t("failure",!1)}t(JSON.parse(n.responseText),200===n.status)}},n.open("POST",this.url,s),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-CSRFToken",this.csrf_token),n.send(JSON.stringify(e))}}function t(e,t,s="Loading..."){let n=e.getElementsByClassName("on-loads");for(let e of n)e.style.display=t?"inline-block":"none";t?e.setAttribute("disabled",""):e.removeAttribute("disabled"),e.getElementsByClassName("button-text")[0].innerText=s}let s=function(t){let s={};for(let t of["confirm-delete"])s[t]=new e(t);return s}();document.body.onload=()=>{!function(e,t){let s=document.getElementsByClassName(e);for(let e of s)e.addEventListener("click",(s=>{t(e)}))}("confirm-delete",(e=>{let n=e.dataset.id,a=e.dataset.url;!function(e,s,n,o){let l=JSON.parse(e.dataset.status),i=e.dataset.trueText,r=e.dataset.falseText;n.status=!l,s.send(n,((s,n)=>{n&&s.success?(window.location.assign(a),t(e,!1,s.status?i:r),e.dataset.status=JSON.stringify(s.status)):t(e,!1,"Failure")})),t(e,!0)}(e,s["confirm-delete"],{id:n})}));let e=document.getElementsByClassName("confirm-delete");for(let s of e)t(s,!0),window.setTimeout((()=>{let e=s.dataset.falseText;t(s,!1,e)}),3e3)}})();